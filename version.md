# [SberPaySdkAndroidDoc](https://sdkpay.github.io/SberPaySdkAndroidDoc/)

#### [Бординг](https://sdkpay.github.io/SberPaySdkAndroidDoc/boarding) | [Регистрация заказов в платежном шлюзе Сбера](https://sdkpay.github.io/SberPaySdkAndroidDoc/order_registration) | [Начало работы](https://sdkpay.github.io/SberPaySdkAndroidDoc/start) | [Сценарии оплаты через SDK](https://sdkpay.github.io/SberPaySdkAndroidDoc/payment_script) | [Работа в режиме посочницы](https://sdkpay.github.io/SberPaySdkAndroidDoc/sandbox_mode) | [Вспомогательные структуры данных](https://sdkpay.github.io/SberPaySdkAndroidDoc/data_structures) | [Актуальная версия SDK](https://sdkpay.github.io/SberPaySdkAndroidDoc/version) | [Поддержка](https://sdkpay.github.io/SberPaySdkAndroidDoc/support) | [FAQ](https://sdkpay.github.io/SberPaySdkAndroidDoc/faq)

<br>

# Актуальная версия

## Версия 2.6

### 2.6.1

- Багфикс и внутренние доработки

### 2.6.0

- Реализовано подтверждение по ОТП оплаты по связке
- Обновление сертификатов безопасности
- Внутренние доработки

<br>

## Версия 2.5

### 2.5.1

- Багфикс и внутренние доработки

### 2.5.0

- Реализована бесшовная авторизация
- Обновлены *targetSdkVersion* и *compileSdk*
- Реализована "Оплата частями" на 6 частей отдельным методом
- Багфикс и внутренние доработки

<br>

## Версия 2.4

### 2.4.0

- Устранены краши библиотеки на ряде устройств
- Добавлен функционал списания бонусов Спасибо
- Добавлен метод `logout`, позволяющий удалять локально сохраненный рефреш-токен, если таковой присутствует
- Исправлен ряд багов

<br>

## Версия 2.3

### 2.3.0

- Устранена проблема несовместимости с библиотекой Sber ID
- Исправлен ряд UI багов

<br>

## Версия 2.2

### 2.2.5

- Исправлены внутренние ошибки

### 2.2.4

- Исправлены внутренние ошибки

### 2.2.3

- Изменен инструмент аналитики
- Добавлен `localSessionId` параметр в *callback* оплаты для более оперативного разбора инцидентов
- Добавлен `localSessionId` на сплеш-экран и на экраны результатов оплаты

### 2.2.2

- Оптимизирован процесс конфигурации SDK
- Сервис с ресурсами переведен на международные сертификаты
- Улучшена производительность

### 2.2.1

- Убран врутренний *network-security-config*

### 2.2.0

- Внесены изменения в контракт инициализации
- Уменьшен размер библиотеки
- Добавлены параметры инициализации на отключение результирующих экранов
- Добавлен параметр инициализации для включения логов SDK
- Добавлено отображение начисляемых за оплату бонусов Спасибо
- Переработан UI на экране OTP
- Улучшена производительность

<br>

## Версия 2.1

### 2.1.1

- Исправлен баг с передачей кириллицы в хедеры
- Исправлен UI
- Исправлено поведение Helpers (Помогашек)
- Поднята версия ThreeTen BP
- Исправлен баг с регионом

### 2.1.0

- Выполнен редизайн SDK
- Удалены пермисии на bluetooth и wi-fi
- Добавлен Доп функционал Helpers (Помогашек)
- Добавлена защита оплаты, с помощью дополнительного момниторинга и обнаружения подозрительных операций
- Исправлены внутренние баги
- Исправлена работа с песочницей без авторизации в приложение банка

<br>

## Версия 2.0

### 2.0.7

- Внутренние доработки
- Добавлен коллбек инициализации sdk
- UI доработки

### 2.0.6

- Обновлены сертификаты безопасности

### 2.0.5

- Исправлен плавающий баг с дублирование шторки
- Внутренние доработки
- UI доработки

### 2.0.4

- Внутренние доработки

### 2.0.3

- Обновлены правила для proguard

### 2.0.2

- Внутренние доработки

### 2.0.1

- Внутренние доработки
- UI доработки

### 2.0.0

- Добавлена авторизация через рефреш-токен после первой авторизации через СБОЛ
- Добавлено подтверждение оплаты через ОТП при превышении суммы в 5000
- В метод автоматической оплаты добавлен обязательный параметр `orderNumber`
- Переработаны методы инициализации и взаимодействия с SDK. Также взаимодействие было перенесено из `SPayButton` в `SPaySdkApp`
- Исправлены UI баги
- Исправлен краш при инициализации SDK на версии API34 при вызове `registerReceiver`

<br>

## Версия 1.2

### 1.2.6

- Внутренние доработки
- UI доработки

### 1.2.5

- Внутренние доработки

### 1.2.4

- Доработан *callback* на мануальный выход пользователя при авторизации в приложении банка

### 1.2.3

- Доработан функционал “Плати частями”

### 1.2.2

- Убраны обязательные отступы на кнопке `SPayButton` “Оплатить по SberPay”
- Добавлена возможность изменить скругление углов кнопки `SPayButton` “Оплатить по SberPay” с помощью метода `setCornerRadius(dpRadius: Int)` класса `SPayButton`
- Исправлена проблема с зависимостью, которая мешала пройти ревью в Google Play Store
- Поднята версия **Kotlin до 1.8.0**
- Поднята версия **Android Gradle Plugin до 7.4.2**
- Поднята версия **Gradle Plugin до 7.5**

### 1.2.1

- Исправлена проблема некорректно работающего метода `isReadyForSPaySdk`
- Исправлена проблема отсутствия коллбека ошибки работы SDK

### 1.2.0

- Метод `payWithOrderId` помечен, как *deprecated* и будет удален из публичного API SberPay SDK в одном из следующих релизов. Используйте `payWithBankInvoiceId, идентичный по функционалу
- В методе `pay` параметры `authorization` и `orderId` заменены на `apiKey` и `bankInvoiceId`
- В методе `getPaymentToken` параметр `authorization` заменен на `apiKey`
- Добавлена новая ошибка `SdkClosedByUser`, которая будет возвращаться в *callback’е* методов на оплату, когда юзер мануально закроет “шторку” SDK
- Добавлена валидация параметра `bankInvoiceId` в методах `pay`, `payWithBankInvoiceId` и `payWithOrderId`. Ошибка валидации будет возвращаться в экземпляром класса `RequiredDataNotSent`
- Исправлена ошибка, когда SDK крашилось, если у пользователя не было приоритетной карты
- Исправлена ошибка с отсутствием закругления логотипа мерчанта для картинок с залитым цветным фоном
- Исправлена ошибка с повторным воспроизведением звука на финальном экране, при разворачивании приложения из фона
- Исправлена ошибка с некорректным отображением имени пользовательских карт Исправлена ошибка при восстановлении состояния SDK из кэша
- Исправлены мелкие UI баги